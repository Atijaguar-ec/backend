# Test profile overrides for CI and local dev
INATrace.env = TEST

# In tests, inherit datasource and JPA defaults from application.properties
# Keep Flyway, naming, logging and other test-only overrides below.

# JPA/Hibernate - Use DDL auto-generation for tests
spring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyComponentPathImpl
spring.jpa.hibernate.naming.physical-strategy = org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.properties.hibernate.dialect = com.abelium.inatrace.configuration.CustomMySQLDialect
spring.jpa.hibernate.ddl-auto = update
spring.jpa.properties.hibernate.hbm2ddl.auto = update

# Disable Flyway for tests - let Hibernate handle schema creation
spring.flyway.enabled = false

# Database credentials for tests (CI MySQL service defaults). Can be overridden via env vars.
spring.datasource.username = ${SPRING_DATASOURCE_USERNAME:inatrace}
spring.datasource.password = ${SPRING_DATASOURCE_PASSWORD:inatrace}

# Reduce noisy logging in CI
logging.level.org.hibernate.orm.query=WARN
logging.level.org.springframework=WARN
logging.level.com.abelium.inatrace=INFO

# Mail disabled in tests
INATrace.mail.sendingEnabled = false

# Misc required placeholders to avoid bean failures
INATrace.auth.jwtSigningKey = test-key
INATrace.documents.root = documents/
INATrace.fileStorage.root = inatrace_file_storage_path
