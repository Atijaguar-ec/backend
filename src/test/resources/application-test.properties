# Test profile overrides for CI and local dev
INATrace.env = TEST

# In tests, inherit datasource and JPA defaults from application.properties
# Keep Flyway, naming, logging and other test-only overrides below.

# JPA/Flyway
spring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyComponentPathImpl
spring.jpa.hibernate.naming.physical-strategy = org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.properties.hibernate.dialect = com.abelium.inatrace.configuration.CustomMySQLDialect

# Ensure Flyway runs on startup and tolerates out-of-order/ignored migrations in forks
spring.flyway.baseline-on-migrate = true
spring.flyway.out-of-order = true
spring.flyway.validate-on-migrate = false
spring.flyway.check-location = false
spring.flyway.table = schema_version
spring.flyway.ignore-missing-migrations = true
spring.flyway.locations = com.abelium.inatrace.db.migrations,classpath:/db/migrations

# Reduce noisy logging in CI
logging.level.org.hibernate.orm.query=WARN
logging.level.org.springframework=WARN
logging.level.com.abelium.inatrace=INFO

# Mail disabled in tests
INATrace.mail.sendingEnabled = false

# Misc required placeholders to avoid bean failures
INATrace.auth.jwtSigningKey = test-key
INATrace.documents.root = documents/
INATrace.fileStorage.root = inatrace_file_storage_path
